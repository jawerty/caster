<DOCTYPE html>
<html>
<head>
	<title>Caster</title>
	<style>
		#video-channel {
			min-height: 400px;
			min-width: 400px;
			border: 1px solid #ccc;
		}
	</style>
	<script src="engine.io.js"></script>
	<script src="https://webrtc-experiment.appspot.com/lib/RTCPeerConnection-v1.4.js"></script>
	<script src="streamer.js"> </script>
	<script>
		var socket = new eio.Socket('ws://localhost:3000/');
		socket.binaryType = 'blob';
		socket.on('open', function () {
			socket.send(new Int8Array(5));
			socket.on('close', function(){ });
			socket.on('chunk', function (data) {
				console.log(data)
			});
		});
	</script>
	
</head>
<body>

	<input type="file" title="Choose Video" />
	<video id="video-channel" autoplay></video>
	<script>
	var streamer = new Streamer();

	function onData(data) {
	    if (data.end) streamer.end();
	    else streamer.append(data);
	}

	streamer.push = function (chunk) {
	 	console.log("pushed")
	 	var sentChunk = JSON.stringify(chunk)
	    offererDataChannel.send(sentChunk)
	};

	</script>
	<script src="main.js"></script>
	<script>
        /* pre-recorded media receiver */

    
        
    </script>
</body>
</html>